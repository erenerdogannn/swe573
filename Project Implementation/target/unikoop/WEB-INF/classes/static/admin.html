<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>Uni Koop</title>


<!-- CSS -->
<link href="assets/stylesheets/bootstrap.min.css" rel="stylesheet">
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="stylesheet" href="assets/stylesheets/jquery.dataTables.tableTools.min.css" type="text/css">
<link rel="stylesheet" href="assets/stylesheets/font-awesome.min.css">
<link rel="stylesheet" href="assets/stylesheets/main.css" type='text/css'>
<link rel="stylesheet" href="assets/stylesheets/select2.css" type='text/css'>
<link rel="stylesheet" href="assets/stylesheets/bootstrap-select.min.css" type="text/css">
<link rel="stylesheet" href="assets/stylesheets/jquery.fileupload.css" type="text/css">
<link rel="stylesheet" href="assets/stylesheets/datatables.min.css" type="text/css">
<link rel="stylesheet" href="assets/stylesheets/bootstrap-multiselect.css" type="text/css">

</head>

<body class="preload body-panel">
<div class="panel-wrapper">


    <!-- SIDEBAR -->
    <div class="panel-sidebar-hide-wrapper">
        <figure class="arrow-down"></figure>
        <div class="panel-sidebar-wrapper">
            <ul class="panel-sidebar-holder">
                <li class="panel-sidebar-item first">
                    <a href="index.html">
                        <figure class="logo">
                        </figure>
                    </a>
                </li>
                <li class="panel-sidebar-item">
                    <a href="volunteer.html">
                        <figure id=""></figure>
                        <h5>GÖNÜLLÜ OL</h5>
                    </a>
                </li>
                <li class="panel-sidebar-item volunteer-sidebar">
                    <a href="add-product-producer.html">
                        <figure id=""></figure>
                        <h5>ÜRÜN/ÜRETİCİ EKLE</h5>
                        <span class="arrow"></span>
                    </a>
                </li>
                <li class="panel-sidebar-item volunteer-sidebar">
                    <a href="pos.html">
                        <figure id=""></figure>
                        <h5>POS</h5>
                    </a>
                </li>
                <li class="panel-sidebar-item volunteer-sidebar">
                    <a href="sales-report.html">
                        <figure id=""></figure>
                        <h5>SATIŞ RAPORU</h5>
                    </a>
                </li>
                <li class="panel-sidebar-item volunteer-sidebar">
                    <a href="inventory-report.html">
                        <figure id=""></figure>
                        <h5>STOK RAPORU</h5>
                    </a>
                </li>
                <li class="panel-sidebar-item admin-sidebar">
                    <a href="create-workslot.html">
                        <figure id=""></figure>
                        <h5>İŞ YARAT</h5>
                    </a>
                </li>
                <li class="panel-sidebar-item admin-sidebar">
                    <a href="create-event.html">
                        <figure id=""></figure>
                        <h5>ETKİNLİK YARAT</h5>
                    </a>
                </li>
                <li class="panel-sidebar-item admin-sidebar">
                    <a href="create-announcement.html">
                        <figure id=""></figure>
                        <h5>DUYURU YARAT</h5>
                    </a>
                </li>
                <li class="panel-sidebar-item admin-sidebar">
                    <a class="current" href="admin.html">
                        <figure></figure>
                        <h5>ADMIN</h5>
                    </a>
                </li>

            </ul>
        </div>
    </div>
    <div class="sidebar-user-holder dropdown">
        
        <!-- Kullanıcı loginse current class'ı koy -->
        <a class="sidebar-user-item"  href="#" data-toggle="dropdown">
            <h5><i class="fa fa-cog"></i> Hesabım</h5>
        </a>

        <ul class="dropdown-menu not-slide not-close sidebar-user-dropdown">
            <span class="arrow-icon"></span>

            <div class="user-account-holder">
                <!-- <p class="user-name">Eren Erdoğan</p> -->
                <a href="settings.html"
                   class="button button-verythin a button-blue  button-xs right user-account-button">
                    Profilim</a>
            </div>

            <div class="user-usage-holder">

                <!--
                <p class="user-usage-project-number">Clicks</p>

                <p class="user-usage-project-usage">Estimate</p>
                -->
            </div>

            <div class="user-logout-holder">
                <a id="sign-out-btn"
                   class="button button-verythin a button-red  button-xs right user-logout-button">Çıkış Yap</a>
            </div>


        </ul>
    </div>
    <!-- END OF SIDEBAR -->
    
    <div class="panel-content-wrapper without-header">
        <div class="panel-content-holder without-header">

            <!-- ALERTS

            <div class="alert alert-danger" role="alert">
                <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span
                            class="sr-only">Close</span></button>
                <strong>Error!</strong>
            </div>
            <div class="alert alert-success" role="alert">
                <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span
                            class="sr-only">Close</span></button>
                <strong>Success!</strong>
            </div>

            <div class="alert alert-warning" role="alert">
                <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span
                            class="sr-only">Close</span></button>
                <strong>Warning!</strong> 
            </div>

            END OF ALERTS -->
            
            <div class="panel-content-widget xlg border-bottom">
                <ul class="panel-content-heading-holder">
                    <li class="panel-content-heading-item"><a href="#" class="current">Admin Panel</a></li>
                </ul>
            </div>
            <div class="panel-content-widget xlg" style="padding-top: 40px;">
                <div class="panel-table-holder">
                   <!-- <button class="button button-md button-blue" id="add-domain" data-toggle="modal"
                            data-target="#add-domain-modal" style="display: block;">Kullanıcı Ekle
                    </button> -->
                    <table class="table table-project" id="project-table">
                        <thead>
                        <tr>
                            <th class="" width="260">
                                Ad Soyad
                            </th>
                            <th class="center-txt">
                                Email
                                <span></span>
                            </th>
                            <th class="center-txt">
                                Şifre
                                <span></span>
                            </th>
                            <th class="center-txt">
                                Rolü
                                <span></span>
                            </th>
                            <th>

                            </th>
                            <th>

                            </th>
                        </tr>
                        </thead>
                        <tbody id="user-list-table">

                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>


<script src="assets/javascript/jquery-2.1.1.min.js"></script>
<script src="assets/javascript/bootstrap.min.js"></script>
<script src="assets/javascript/select2.min.js"></script>
<script src="assets/javascript/jquery.multiple.select.min.js"></script>
<script src="assets/javascript/moment-with-locales.min.js"></script>
<script src="assets/javascript/moment-timezone-with-data-2010-2020.min.js"></script>
<script src="assets/javascript/daterangepicker.min.js"></script>
<script src="assets/javascript/highcharts-custom.min.js"></script>
<script src="assets/javascript/map.js"></script>
<script src="assets/javascript/datatables.min.js"></script>
<script src="assets/javascript/jquery.dataTables.tableTools.min.js"></script>
<script src="assets/javascript/jspath.min.js"></script>
<script src="assets/javascript/jdata.js"></script>
<script src="assets/javascript/main.js"></script>
<script src="assets/javascript/pace.min.js"></script>

<script src="assets/javascript/mappings.js"></script>

<script src="assets/javascript/jquery.ui.widget.js"></script>
<script src="assets/javascript/bootstrap-select.min.js"></script>
<script src="assets/javascript/jquery.iframe-transport.js"></script>
<script src="assets/javascript/jquery.fileupload.js"></script>
<script src="assets/javascript/easytimer.min.js"></script>
<script src="assets/javascript/bootstrap-multiselect.js"></script>
<script src="assets/javascript/bootstrap-tagsinput.min.js"></script>

<script>
    // Array Remove - By John Resig (MIT Licensed)
    Array.prototype.remove = function (from, to) {
        var rest = this.slice((to || from) + 1 || this.length);
        this.length = from < 0 ? this.length + from : from;
        return this.push.apply(this, rest);
    };
    
    $(document).ready(function(){
     $.getJSON( urlRoot + "/users", 
               
        function (data) {
         
            $.each( data, function( key, val ) {
                var change;
                if (val.userType == "member") {
                    change = "Gönüllü Yap";
                    changeType= "make-volunteer";
                    
                } else if (val.userType == "volunteer") {
                    change = "Üye Yap";
                    changeType = "make-member";
                }
                
                var type;
                if(val.userType == "volunteer") {
                   type = "Gönüllü";
                } else if (val.userType == "member") {
                    type = "Üye";
                } else {
                    type = val.userType;
                }
                
                $('#user-list-table').append( 
                    '<tr class="" value=" ' + val.id +' ">' +
                        '<td class="domain-name-holder">' +
                            val.name +
                        '</td>' +
                        '<td class="domain-situation-holder center">' +
                            val.email +
                        '</td>' +
                        '<td class="domain-situation-holder center">' +
                            val.password +
                        '</td>' +

                        '<td class="domain-situation-holder center" id="">' +
                            type +
                        '</td>' +
                        '<td class="domain-situation-holder center">' +
                           '<a href="" class="make-change ' + changeType + '">' + change + '</a>' +
                        '</td>' +
                        '<td>'+
                            '<a class="delete-domain" href="#"><i class="fa fa-trash-o delete-user"></i></a>'+
                        '</td>'+
                    '</tr>'
                );
                
            });
         
        })
    });
    
    
    $('#user-list-table').on('click','.make-volunteer', function(){
        
        jQuery.ajaxSetup({async:false});
        
        var userId = $(this).parents('tr').attr('value');
        console.log(userId);
        
        $.ajax({
            headers: { 
            'Accept': 'application/json',
            'Content-Type': 'application/json' 
            },
            type: "PUT",
            url: urlRoot + "/users/update/" + userId,

            data: JSON.stringify({
                userType: "volunteer"
            }),
            dataType:"json",
            success: function (html) {
                alert('Değişiklik yapıldı.');
                window.location.reload(true);
            },
             error: function (xhr, textStatus, thrownError) {
                alert('Hata meydana geldi. Lütfen tekrar deneyiniz.');

            }
        });
    });
    
    
    
    $('#user-list-table').on('click','.make-member', function(){
        
        jQuery.ajaxSetup({async:false});
        
        var userId = $(this).parents('tr').attr('value');
        console.log(userId);
        
        $.ajax({
            headers: { 
            'Accept': 'application/json',
            'Content-Type': 'application/json' 
            },
            type: "PUT",
            url: urlRoot + "/users/update/" + userId,

            data: JSON.stringify({
                userType: "member"
            }),
            dataType:"json",
            success: function (html) {
                alert('Değişiklik yapıldı.');
                window.location.reload(true);
            },
             error: function (xhr, textStatus, thrownError) {
                alert('Hata meydana geldi. Lütfen tekrar deneyiniz.');

            }
        });
        
    })
    
    $('#user-list-table').on('click','.delete-user', function(){
        
        jQuery.ajaxSetup({async:false});
        
        var userId = $(this).parents('tr').attr('value');
        console.log(userId);
        
        $.ajax({
            headers: { 
            'Accept': 'application/json',
            'Content-Type': 'application/json' 
            },
            type: "DELETE",
            url: urlRoot + "/users/delete/" + userId,
            success: function (html) {
                alert('Kullanıcı silindi.');
                window.location.reload(true);
            },
             error: function (xhr, textStatus, thrownError) {
                alert('Hata meydana geldi, lütfen tekrar deneyiniz!');

            }
        });
        
    })
    
    
</script>

</body>
</html>